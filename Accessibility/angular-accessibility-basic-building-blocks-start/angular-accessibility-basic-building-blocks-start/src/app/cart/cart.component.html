<section
  aria-label="Cart Checkout"
  class="main-content"
>
  <h2 class="visually-hidden">Cart Checkout</h2>
  <div class="image-wrapper">
    <img
      src="../../assets/images/checkout.jpg"
      alt=""
    />
  </div>
  <div
    class="cart-wrapper"
    aria-live="assertive"
  >
    <h3 class="cart-header">Just Like People Shopping Cart</h3>
    @if(submitted && !loading) {
      <div class="totals-item">
        <div class="totals-details-wrapper">
          <div>Thank you for our order!</div>
        </div>
        <div class="totals-details-wrapper">
          <div>Order# 1664</div>
        </div>
        <div class="totals-details-wrapper">
          <button input="submit" (click)="returnToProducts()">Keep Shopping</button>
        </div>
      </div>
    } @else {
      <div class="cart-items-wrapper">
        @for (item of cartService.cartItemsPlusQuantity(); track item.id){
          <div class="cart-item">
            <div class="cart-item-image-wrapper">
              <img [src]="item.thumb" [alt]="item.title" />
            </div>
            <h4
              [attr.aria-label]="item.title + ' quantity in cart: ' + item.quantity "
              class="cart-item-name"
            >{{ item.title }}</h4>
            <div class="quantity-selector-wrapper">
              <div class="quantity-selector-wrapper">
                <div class="quantity-selector">
                  <button (click)="cartService.decrementCartItem(item.id)">-</button>
                  <span>{{ item.quantity }}</span>
                  <button (click)="cartService.addCartItem(item.id)">+</button>
                </div>
              </div>
            </div>
            <p class="cart-item-price">{{ (item.price * (item.quantity || 1)) | currency }}</p>
          </div>
        } @empty {
          <p class="cart-item-name">Your pets must accessorize! Go add some accessories to your cart</p>
        }
      </div>
      <div class="totals-item">
        <h4 class="visually-hidden">Cart Total: {{ cartService.total() | currency }}</h4>
        <div class="totals-details-wrapper">
          <div>Subtotal</div>
          <div>{{ cartService.subtotal() | currency }}</div>
        </div>
        <div class="totals-details-wrapper">
          <div>Shipping</div>
          <div>{{ cartService.shipping()  | currency }}</div>
        </div>
        <div class="totals-details-wrapper">
          <div>Sales Tax</div>
          <div>{{ cartService.salesTax() | currency }}</div>
        </div>
        <div class="totals-details-wrapper">
          <div>Total</div>
          <div>{{ cartService.total() | currency }}</div>
        </div>
        <div class="totals-details-wrapper" aria-live="assertive">
          @if(loading) {
            <div>Processing...</div>
          } @else {
            <button
              input="submit"
              (click)="checkout()"
              [disabled]="cartService.subtotal() === 0"
            >Checkout</button>
          }
        </div>
      </div>
    }
  </div>
</section>
